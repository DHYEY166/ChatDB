{% extends "base.html" %}

{% block content %}
<div class="hero-section text-center">
    <h1 class="display-4 fw-bold text-primary mb-4">Welcome to ChatDB</h1>
    <p class="lead mb-5">Your interactive database management and visualization platform</p>
    
    <div class="row g-4 mb-5">
        <div class="col-md-3">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-database"></i>
                </div>
                <h5>Connect</h5>
                <p>Connect to SQLite, MySQL, or PostgreSQL databases</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-upload"></i>
                </div>
                <h5>Upload</h5>
                <p>Upload CSV, JSON, or Excel files for analysis</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h5>Visualize</h5>
                <p>Create beautiful charts and graphs from your data</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h5>Reports</h5>
                <p>Generate downloadable reports in CSV format</p>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="quick-start-card">
                <h4><i class="fas fa-rocket"></i> Quick Start</h4>
                <ol class="text-start">
                    <li>Go to <strong>Connect</strong> to set up your database</li>
                    <li>Use <strong>Manage</strong> to upload files or run queries</li>
                    <li>Visit <strong>Visualize</strong> to create charts</li>
                    <li>Generate <strong>Reports</strong> for sharing</li>
                </ol>
            </div>
        </div>
        <div class="col-md-6">
            <div class="stats-card">
                <h4><i class="fas fa-chart-line"></i> Platform Stats</h4>
                <div class="row text-center">
                    <div class="col-6">
                        <div class="stat-item">
                            <h3 id="tableCount">-</h3>
                            <p>Tables</p>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="stat-item">
                            <h3 id="queryCount">-</h3>
                            <p>Queries</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Load platform stats
document.addEventListener('DOMContentLoaded', function() {
    // Fetch table count
    fetch('/tables')
        .then(response => response.json())
        .then(data => {
            if (data.tables) {
                document.getElementById('tableCount').textContent = data.tables.length;
            }
        })
        .catch(error => console.error('Error loading tables:', error));
    
    // Fetch query history count
    fetch('/history')
        .then(response => response.json())
        .then(data => {
            if (data.history) {
                document.getElementById('queryCount').textContent = data.history.length;
            }
        })
        .catch(error => console.error('Error loading history:', error));
});
</script>
{% endblock %}
